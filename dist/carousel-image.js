!function(t,i){"function"==typeof define&&define.amd?define(["$"],i):"object"==typeof exports?module.exports=i():t.ScrollLoad=i(window.Zepto||window.jQuery||$)}(this,function(t){function i(){}return t.fn.CarouselImage=function(n){var e=[];return t(this).each(function(){var s=new i,o=t.extend({target:t(this)},n);s.init(o),e.push(s)}),e},i.prototype={init:function(i){this.index=0,this.container=i.target,this.content=this.container.children().first(),this.timer=i.timer||3e3,this.animate=i.animate||500,this.num=i.num||null,this.list=this.content.children(),this.list.width(this.container.width()),this.step=this.list.first().width(),this.content.width(this.list.length*this.step);var n=new Image;n.src=this.list.first().find("img").attr("src");var e=this;if(t(n).on("load",function(){var t=this.height,i=this.width;e.container.height(e.container.width()/i*t)}),this.container.height(this.content.height()),this.size=this.list.length,this.repeat=i.repeat||!1,this.repeat){for(var s=0,o=this.list.length;o>s;s++){var h=t(this.list[s]);h.attr("data-index",s)}var a=this.list.first().clone(),r=this.list.last().clone();this.content.append(a),this.content.prepend(r),this.content.css({left:-this.step,position:"absolute"}),this.content.width((this.list.length+2)*this.step)}else this.content.css({left:0,position:"absolute"});this.bindEvent(),this.auto(),this.formatNum()},touch:function(i,n,e){function s(t){return e.call(this,t)}var o;"function"==typeof n&&(e=n),t(i).on("touchmove",n,function(t){o=!0}).on("touchend",n,function(t){if(t.preventDefault(),!o){var i=e.call(this,t,"touch");i===!1&&(t.preventDefault(),t.stopPropagation())}o=!1}),t(i).on("click",n,s)},bindEvent:function(){var i=this,n={},e=0,s={},o=!1,h={};this.content.on("touchstart",function(s){return n={x:s.changedTouches[0].pageX},2==s.targetTouches.length?(o=!1,!1):(h=t(this).position(),e=n.x,void clearInterval(i.interval))}).on("touchmove",function(e){return 2==e.targetTouches.length?!1:(o=!0,s={x:e.changedTouches[0].pageX},i.bloom?(h={left:h.left+(s.x-n.x)},t(this).css(h)):(h.left=h.left+(s.x-n.x),t(this).css({left:h.left})),n=s,!1)}).on("touchend",function(h){s={x:h.changedTouches[0].pageX};var a=t(this).position(),r={left:a.left+(s.x-n.x)};return t(this).css(r),s.x>e?i.index--:i.index++,i.go(),o=!1,i.auto(),!1}),i.touch(i.num,"i",function(){clearInterval(i.interval),i.index=t(this).index(),i.go(),i.auto()})},formatNum:function(){if(this.num){for(var t="",i=0,n=this.list.length;n>i;i++){var e=(this.list[i],"");this.index==i&&(e="current"),t+='<i class="'+e+'">'+(i+1)+"</i>"}this.num.html(t)}},go:function(){var t=this,i=t.step;if(this.repeat){var n=-(t.index+1)*i;t.index<0&&(n=0),0==t.index&&(n=-i),t.content.animate({left:n},t.animate,function(){t.index<0&&(t.index=t.list.size()-1,t.content.css("left",-(t.index+1)*i)),t.index>=t.list.size()&&(t.index=0,t.content.css("left",-1*i)),t.formatNum()})}else{t.index<0&&(t.index=0),t.index>=t.size&&(t.index=t.size-1);var n=-t.index*i;t.content.animate({left:n},t.animate,function(){t.formatNum()})}},auto:function(){var t=this;this.interval=setInterval(function(){t.index++,t.repeat||t.index>=t.size&&(t.index=0),t.go()},this.timer)}},i});